let FasterJs={config:{basePathName:null,mode:"hash",modes:["hash","history"],componentsTransitions:!1,title:null,titleSeparator:" :: "},tools:{core:{refreshLinks(){let e=FasterJs;document.querySelectorAll("[data-faster-link]").forEach((t=>{if(!t.hasAttribute("data-faster-link-refresh-excluded")||"true"!==t.getAttribute("data-faster-link-refresh-excluded")){let o=t.cloneNode(!0);if(t.parentNode.replaceChild(o,t),"history"===e.config.mode){let t=window.location.origin+(e.config.basePathName+o.getAttribute("href")).replace("//","/");"a"===o.tagName.toLowerCase()&&o.setAttribute("href",t)}else"a"===o.tagName.toLowerCase()&&o.setAttribute("href",("#!/"+o.getAttribute("href").replace("#!","")).replace("//","/"));o.addEventListener("click",(t=>{"history"===e.config.mode&&t.preventDefault(),e.router.goTo(o.getAttribute("data-faster-link"))})),o.hasAttribute("data-faster-link-refresh-excluded")&&o.setAttribute("data-faster-link-refresh-excluded",!0)}}))},generateLinks(){let e=FasterJs;document.querySelectorAll("[data-faster-link]").forEach((t=>{if(!t.getAttribute("data-faster-link").includes("/")){let o=t.getAttributeNames().filter((e=>e.includes("data-faster-link")));if(1===o.length);else{let r=e.router.routes.filter((e=>e.name===t.getAttribute("data-faster-link")))[0].path,a={};o=o.filter((e=>"data-faster-link"!==e)),o.forEach((e=>{let o=e.replace("data-faster-link-",""),r=t.getAttribute(`data-faster-link-${o}`);["refresh-excluded"].includes(o)||("params"!==o?a[o]=r:a=Object.assign({},JSON.parse(r),a),t.removeAttribute(`data-faster-link-${o}`))}));for(let e in a)r=r.replace(`:${e}`,a[e]);t.setAttribute("data-faster-link-parsed",r),"a"===t.tagName.toLowerCase()&&t.setAttribute("href",r)}}}))},refresh(){this.generateLinks(),this.refreshLinks()}},dom:{append(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("beforeend",t)})),o&&r.tools.core.refresh()},prepend(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("afterbegin",t)})),o&&r.tools.core.refresh()},before(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("beforebegin",t)})),o&&r.tools.core.refresh()},after(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("afterend",t)})),o&&r.tools.core.refresh()},setPageTitle(e,t=!0){let o=FasterJs;document.title=e+(t?`${o.config.titleSeparator}${o.config.title}`:"")}}},router:{baseRoute:"/",routes:[],fallbacks:{noRoutes:null,routeNameNotFound:null,routeNotRegistered:null},currentRoute(){let e=FasterJs;if("hash"===e.config.mode)return window.location.hash.replace("#!","");{let t=window.location.origin,o=window.location.href.replace(`${t+e.config.basePathName}`,"");return""!==o?"/"+o.replace(/\/+$/,""):"/"}},goTo(e,t={}){let o=FasterJs;if(e.includes("/"))if("history"===o.config.mode){let r=window.location.origin+(o.config.basePathName+e).replace("//","/");history.pushState({route:e,params:t},"",r),this.init()}else window.location.hash=`#!/${e}`.replace("//","/");else{let r=o.router.routes,a=null;if(r.forEach(((t,o)=>{t.name===e&&(a=t.path)})),a){for(let e in t)a=a.replace(`:${e}`,t[e]);o.router.goTo(a,t)}else o.router.throwError("routeNameNotFound")}},register(e){let t=e=>({name:e.name,path:e.path,view:e.view?e.view:null,on:e.on?e.on:null,before:e.before?e.before:null,after:e.after?e.after:null,module:e.module?e.module:null});this.routes.length>0?e.forEach(((e,o)=>{this.routes.forEach(((o,r)=>{e.name===o.name?this.routes[r]=t(e):this.routes.push(t(e))}))})):e.forEach(((e,o)=>{this.routes.push(t(e))}))},throwError(e){let t=FasterJs,o={config:{mode:t.config.mode,el:t.tools.dom.el},router:{baseRoute:this.baseRoute,currentRoute:this.currentRoute(),fallback:e,goTo:this.goTo},tools:this.tools};this.fallbacks[e]?this.fallbacks[e](o):document.querySelector(`[data-faster-fallback][data-faster-fallback-type=${e}]`)?t.view(e):console.log(`router fallback error: ${e}`)},init(){let e=FasterJs,t="routeNotRegistered",o={},r={config:{mode:e.config.mode,el:e.tools.dom.el},route:{},router:{baseRoute:this.baseRoute,currentRoute:this.currentRoute(),goTo:this.goTo},tools:e.tools,view:e.view};if(e.events.beforeRouteEnter&&e.events.beforeRouteEnter(r),"hash"===e.config.mode&&["","#","#!"].includes(window.location.hash))this.goTo(this.baseRoute);else{if(this.routes.length>0){let e=this.routes.filter((e=>!e.path.includes(":"))),a=this.routes.filter((e=>e.path.includes(":")));for(let a in e)if(e[a].path===this.currentRoute()){t=null,o=e[a],r.route={name:e[a].name,path:e[a].path};break}if(t){let e=this.currentRoute(),n=e.split("/").slice(1);for(let t in a){let i=a[t].path,s=new RegExp(i.replace(/:[^\s/]+/g,"([\\w-]+)")),l=i.split("/").slice(1),u=i.match(/:[^\s/]+/g),c=e.match(s);if(n.length===l.length&&c){o=a[t];let e={},n=[...c.slice(1)];u.forEach(((t,o)=>{e[t.replace(":","")]=n[o]})),r.route={name:o.name,path:c[0],params:e};break}}Object.keys(o).length>0&&(t=null)}}else t="noRoutes";if(t)this.throwError(t);else{if(o.before&&o.before(r),o.module){let e=o.module({parameters:r.route.params}),t=r.router.currentRoute,a=`[data-faster-app] [data-faster-component][data-faster-component-id="${e.name}"][data-faster-component-route="${t}"]`;e.beforeMount&&(r.tools.core.kill=!1,e.beforeMount(r)),!0!==r.tools.core.kill&&(document.querySelector(a)||r.tools.dom.append("[data-faster-app]",`\n                <section\n                  data-faster-component\n                  data-faster-component-id="${e.name}"\n                  data-faster-component-route="${t}"\n                  data-faster-component-keep-alive="${!0===e.keepAlive}"\n                >${e.template}</section>\n              `,!0),document.querySelectorAll(`[data-faster-app] [data-faster-component][data-faster-component-id="${e.name}"] *`).forEach((t=>{t.getAttributeNames().forEach((o=>{if(o.startsWith("@")){let a=e.methods[t.getAttribute(o)];o=o.replace("@",""),t.addEventListener(o,a.bind(null,r),!1),t.removeAttribute(`@${o}`)}}))})),r.view(e.name,t)),e.mounted&&e.mounted(r)}o.view&&e.view(o.view),o.on&&o.on(r),o.after&&o.after(r)}e.events.routeEntered&&e.events.routeEntered(r)}}},events:{beforeInit:null,init:null,beforeRouteEnter:null,routeEntered:null,loaded:null,ononline:null,onoffline:null},view(e,t=null){let o=FasterJs;[...document.querySelectorAll("[data-faster-app] [data-faster-component]"),...document.querySelectorAll("[data-faster-app] [data-faster-fallback]")].forEach((r=>{let a=[r.getAttribute("data-faster-component-id"),r.getAttribute("data-faster-fallback-type")];if(!t&&a.includes(e)||a.includes(e)&&t&&r.getAttribute("data-faster-component-route")===t)o.config.componentsTransitions?r.style.visibility="visible":r.style.display="block",setTimeout((()=>{r.setAttribute("data-faster-component-activity","active")}),1);else{let e=null!==r.getAttribute("data-faster-component-route")&&"false"===r.getAttribute("data-faster-component-keep-alive");o.config.componentsTransitions?e?document.querySelectorAll("[data-faster-component]").forEach((e=>{e.addEventListener("transitionend",(e=>{r.remove()}))})):r.style.visibility="hidden":e?r.remove():r.style.display="none",setTimeout((()=>{r.setAttribute("data-faster-component-activity","")}),1)}}))},init(){if(this.tools.dom.el=document.querySelectorAll("[data-faster-app]"),document.querySelector("html").style.scrollBehavior="smooth",this.view("스크립팅"),0===this.tools.dom.el.length)return document.body.innerHTML="Error: open console tool to review it.",void console.log("Error: no ([data-faster-app]) element detected in <body>.");if(this.tools.dom.el.length>1)return document.body.innerHTML="Error: open console tool to review it.",void console.log("Error: more than one ([data-faster-app]) element detected in <body>. Only one element should be.");if(this.tools.dom.el=this.tools.dom.el[0],null===this.config.basePathName)return document.querySelector("[data-faster-app]").innerHTML="Error: open console tool to review it.",void console.log("Error: no (Faster.config.basePathName) path value passed.");let e={config:{mode:this.config.mode,el:this.tools.dom.el},router:{baseRoute:this.router.baseRoute,currentRoute:this.router.currentRoute(),goTo:this.router.goTo},tools:this.tools,view:this.view};if(this.tools.core.refresh(),"history"===this.config.mode){if(""!==window.location.hash)return void(window.location.href=window.location.origin+window.location.pathname);window.onpopstate=e=>{this.router.init()}}else window.onhashchange=()=>{this.router.init()},location.origin+location.pathname!==location.origin+this.config.basePathName&&(location.href=location.origin+this.config.basePathName+location.hash);this.events.beforeInit&&this.events.beforeInit(e),window.onload=()=>{this.events.init&&this.events.init(e),this.router.init(),this.events.loaded&&this.events.loaded(e),document.querySelector("[data-faster-loading]")&&setTimeout((()=>{document.querySelector("[data-faster-loading]").classList.add("loaded")}),1)},window.addEventListener("online",(t=>{this.events.ononline?this.events.ononline(e,t):console.log("router event key: ononline")})),window.addEventListener("offline",(t=>{this.events.onoffline?this.events.onoffline(e,t):console.log("router event key: onoffline")}))}};
