let FasterJs={config:{basePathName:null,mode:"hash",modes:["hash","history"],componentsTransitions:!1,loadingLayer:!1},router:{baseRoute:"/",routes:[],fallbacks:{noRoutes:null,routeNameNotFound:null,routeNotRegistered:null},currentRoute(){if("hash"===FasterJs.config.mode)return window.location.hash.replace("#!","");{let e=window.location.origin,t=window.location.href.replace(`${e+FasterJs.config.basePathName}`,"");return""!==t?"/"+t.replace(/\/+$/,""):"/"}},goTo(e,t={}){if(e.includes("/"))if("history"===FasterJs.config.mode){let o=window.location.origin+(FasterJs.config.basePathName+e).replace("//","/");history.pushState({route:e,params:t},"",o)}else window.location.hash=`#!/${e}`.replace("//","/");else{let t=FasterJs.router.routes,o=null;t.forEach((t,r)=>{t.name===e&&(o=t.path)}),o?FasterJs.router.goTo(o):FasterJs.router.throwError("routeNameNotFound")}},register(e){this.routes.length>0?this.routes.forEach((t,o)=>{e.forEach((e,r)=>{e.name===t.name?this.routes[o]={name:e.name,path:e.path,view:e.view?e.view:null,on:e.on?e.on:null,before:e.before?e.before:null,after:e.after?e.after:null}:this.routes.push({name:e.name,path:e.path,view:e.view?e.view:null,on:e.on?e.on:null,before:e.before?e.before:null,after:e.after?e.after:null})})}):e.forEach((e,t)=>{this.routes.push({name:e.name,path:e.path,view:e.view?e.view:null,on:e.on?e.on:null,before:e.before?e.before:null,after:e.after?e.after:null})})},throwError(e){let t={config:{mode:FasterJs.config.mode,el:document.querySelector("[data-faster-app]")},router:{baseRoute:this.baseRoute,currentRoute:this.currentRoute(),fallback:e,goTo:this.goTo}};this.fallbacks[e]?this.fallbacks[e](t):document.querySelector(`[data-faster-fallback][data-faster-fallback-type=${e}]`)?FasterJs.view(e):console.log(`router fallback error: ${e}`)},init(){let e=document.querySelector("[data-faster-app] > [data-faster-loading]"),t="routeNotRegistered",o={},r={config:{mode:FasterJs.config.mode,el:document.querySelector("[data-faster-app]")},route:{},router:{baseRoute:this.baseRoute,currentRoute:this.currentRoute(),goTo:this.goTo},view:FasterJs.view};if(document.querySelectorAll("[data-faster-app] > [data-faster-component],[data-faster-app] [data-faster-fallback]").forEach(e=>{FasterJs.config.componentsTransitions?e.style.visibility="hidden":e.style.display="none"}),e&&(FasterJs.config.loadingLayer||(e.style.display="none")),FasterJs.events.beforeRouteEnter&&FasterJs.events.beforeRouteEnter(r),"hash"===FasterJs.config.mode&&["","#","#!"].includes(window.location.hash))this.goTo(this.baseRoute);else{if(this.routes.length>0){let e=this.routes.filter(e=>!e.path.includes(":")),a=this.routes.filter(e=>e.path.includes(":"));for(let a in e)if(e[a].path===this.currentRoute()){t=null,o=e[a],r.route={name:e[a].name,path:e[a].path};break}if(t){let e=this.currentRoute(),n=e.split("/").slice(1);for(let t in a){let s=a[t].path,i=new RegExp(s.replace(/:[^\s/]+/g,"([\\w-]+)")),l=s.split("/").slice(1),u=s.match(/:[^\s/]+/g),c=e.match(i);if(n.length===l.length&&c){o=a[t];let e={},n=[...c.slice(1)];u.forEach((t,o)=>{e[t.replace(":","")]=n[o]}),r.route={name:o.name,path:c[0],params:e};break}}Object.keys(o).length>0&&(t=null)}}else t="noRoutes";t?this.throwError(t):(o.before&&o.before(r),o.view&&FasterJs.view(o.view),o.on&&o.on(r),o.after&&o.after(r)),FasterJs.events.routeEntered&&FasterJs.events.routeEntered(param())}}},events:{beforeInit:null,init:null,beforeRouteEnter:null,routeEntered:null,loaded:null},view(e){[...document.querySelectorAll("[data-faster-app] [data-faster-component]"),...document.querySelectorAll("[data-faster-app] [data-faster-fallback]")].forEach(t=>{t.getAttribute("data-faster-component-id")===e||t.getAttribute("data-faster-fallback-type")===e?(FasterJs.config.componentsTransitions?t.style.visibility="visible":t.style.display="block",t.setAttribute("data-faster-component-activity","active")):(FasterJs.config.componentsTransitions?t.style.visibility="hidden":t.style.display="none",t.setAttribute("data-faster-component-activity",""))})},init(){if(0===document.querySelectorAll("[data-faster-app]").length)return document.body.innerHTML="Error: open console tool to review it.",void console.log("Error: no ([data-faster-app]) element detected in <body>.");if(document.querySelectorAll("[data-faster-app]").length>1)return document.body.innerHTML="Error: open console tool to review it.",void console.log("Error: more than one ([data-faster-app]) element detected in <body>. Only one element should be.");if(null===this.config.basePathName)return document.querySelector("[data-faster-app]").innerHTML="Error: open console tool to review it.",void console.log("Error: no (Faster.config.basePathName) path value passed.");let e={config:{mode:this.config.mode,el:document.querySelector("[data-faster-app]")},router:{baseRoute:this.router.baseRoute,currentRoute:this.router.currentRoute(),goTo:this.router.goTo},view:this.view};if(document.querySelectorAll("[data-faster-link]").forEach(e=>{if("history"===this.config.mode){let t=window.location.origin+(this.config.basePathName+e.getAttribute("href")).replace("//","/");"a"===e.tagName.toLowerCase()&&e.setAttribute("href",t),e.addEventListener("click",t=>{t.preventDefault(),this.router.goTo(e.getAttribute("data-faster-link"))})}else"a"===e.tagName.toLowerCase()&&e.setAttribute("href",("#!/"+e.getAttribute("href")).replace("//","/"));e.addEventListener("click",t=>{"history"===this.config.mode&&t.preventDefault(),this.router.goTo(e.getAttribute("data-faster-link"))})}),"history"===this.config.mode){if(""!==window.location.hash)return void(window.location.href=window.location.origin+window.location.pathname);window.onpopstate=(e=>{this.router.init()})}else window.onhashchange=(()=>{this.router.init()});document.querySelector("html").style.scrollBehavior="smooth",this.events.beforeInit&&this.events.beforeInit(e),window.onload=(()=>{this.events.init&&this.events.init(e),this.router.init(),this.events.loaded&&this.events.loaded(e),this.config.loadingLayer&&setTimeout(()=>{document.querySelector("[data-faster-loading]").classList.add("loaded")},1)})}};