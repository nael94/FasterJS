let FasterJs={config:{basePathName:null,mode:"hash",modes:["hash","history"],componentsTransitions:!1,title:null,titleSeparator:" :: "},tools:{core:{refreshLinks(){let e=FasterJs;document.querySelectorAll("[data-faster-link]").forEach((t=>{if(!t.hasAttribute("data-faster-link-refresh-excluded")||"true"!==t.getAttribute("data-faster-link-refresh-excluded")){let o=t.cloneNode(!0);if(t.parentNode.replaceChild(o,t),"history"===e.config.mode){let e=o.getAttribute("href");"a"===o.tagName.toLowerCase()&&o.setAttribute("href",e)}else"a"===o.tagName.toLowerCase()&&o.setAttribute("href",("#!/"+o.getAttribute("href").replace("#!","")).replace("//","/"));o.addEventListener("click",(t=>{"history"===e.config.mode&&t.preventDefault(),e.router.goTo(o.getAttribute("data-faster-link"),{},o.getAttribute("data-faster-link-parsed"))})),o.hasAttribute("data-faster-link-refresh-excluded")&&o.setAttribute("data-faster-link-refresh-excluded",!0)}}))},generateLinks(){let e=FasterJs;document.querySelectorAll("[data-faster-link]").forEach((t=>{if(!t.getAttribute("data-faster-link").includes("/")){let o=t.getAttributeNames().filter((e=>e.includes("data-faster-link")));if(1===o.length);else if(null===t.getAttribute("data-faster-link-parsed")){let r=e.router.routes.filter((e=>e.name===t.getAttribute("data-faster-link")))[0].path,a={};o=o.filter((e=>"data-faster-link"!==e)),o.forEach((e=>{let o=e.replace("data-faster-link-",""),r=t.getAttribute(`data-faster-link-${o}`);["refresh-excluded","parsed"].includes(o)||("params"!==o?a[o]=r:a=Object.assign({},JSON.parse(r),a),t.removeAttribute(`data-faster-link-${o}`))}));for(let e in a)r=r.replace(`:${e}`,a[e]);t.setAttribute("data-faster-link-parsed",r),"a"===t.tagName.toLowerCase()&&("hash"===e.config.mode?t.setAttribute("href",`#!${r}`):t.setAttribute("href",`${e.config.basePathName}${r}`.replace("//","/")))}}}))},refresh(){this.generateLinks(),this.refreshLinks()}},dom:{append(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("beforeend",t)})),o&&r.tools.core.refresh()},prepend(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("afterbegin",t)})),o&&r.tools.core.refresh()},before(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("beforebegin",t)})),o&&r.tools.core.refresh()},after(e,t,o=!1){let r=FasterJs;document.querySelectorAll(e).forEach((e=>{e.insertAdjacentHTML("afterend",t)})),o&&r.tools.core.refresh()},setPageTitle(e,t=!0){let o=FasterJs;document.title=e+(t?`${o.config.titleSeparator}${o.config.title}`:"")}}},router:{baseRoute:"/",routes:[],fallbacks:{noRoutes:null,routeNameNotFound:null,routeNotRegistered:null},currentRoute(){let e=FasterJs;if("hash"===e.config.mode)return window.location.hash.replace("#!","");{let t=window.location.origin,o=window.location.href.replace(`${t+e.config.basePathName}`,"");return""!==o?"/"+o.replace(/\/+$/,""):"/"}},goTo(e,t={},o=null){let r=FasterJs;if(e.includes("/"))if("history"===r.config.mode){let o=window.location.origin+(r.config.basePathName+e).replace("//","/");history.pushState({route:e,params:t},"",o),this.init()}else window.location.hash=`#!/${e}`.replace("//","/");else{let a=r.router.routes,n=null;if(null===o)if(a.forEach(((t,o)=>{t.name===e&&(n=t.path)})),n){for(let e in t)n=n.replace(`:${e}`,t[e]);r.router.goTo(n,t)}else r.router.throwError("routeNameNotFound");else r.router.goTo(o)}},register(e){let t=e=>({name:e.name,path:e.path,view:e.view?e.view:null,on:e.on?e.on:null,before:e.before?e.before:null,after:e.after?e.after:null,module:e.module?e.module:null});this.routes.length>0?e.forEach(((e,o)=>{this.routes.forEach(((o,r)=>{e.name===o.name?this.routes[r]=t(e):this.routes.push(t(e))}))})):e.forEach(((e,o)=>{this.routes.push(t(e))}))},throwError(e){let t=FasterJs,o={config:{mode:t.config.mode,el:t.tools.dom.el},router:{baseRoute:this.baseRoute,currentRoute:this.currentRoute(),fallback:e,goTo:this.goTo},tools:this.tools},r=this.fallbacks[e];r&&"function"==typeof r?r(o):document.querySelector(`[data-faster-fallback][data-faster-fallback-type=${e}]`)?t.view(e):this.routes.filter((t=>t.name===e)).length>0?this.init(this.routes.filter((t=>t.name===e))[0]):console.log(`router fallback error: ${e}`)},init(e=null){let t=FasterJs,o="routeNotRegistered",r={},a={config:{mode:t.config.mode,el:t.tools.dom.el},route:{},router:{baseRoute:this.baseRoute,currentRoute:this.currentRoute(),goTo:this.goTo},tools:t.tools,view:t.view};if(t.events.beforeRouteEnter&&t.events.beforeRouteEnter(a),"hash"===t.config.mode&&["","#","#!"].includes(window.location.hash))this.goTo(this.baseRoute);else{if(null===e)if(this.routes.length>0){let e=this.routes.filter((e=>!e.path.includes(":"))),t=this.routes.filter((e=>e.path.includes(":")));for(let t in e)if(e[t].path===this.currentRoute()){o=null,r=e[t],a.route={name:e[t].name,path:e[t].path};break}if(o){let e=this.currentRoute(),n=e.split("/").slice(1);for(let o in t){let i=t[o].path,s=new RegExp(i.replace(/:[^\s/]+/g,"([\\w-]+)")),l=i.split("/").slice(1),u=i.match(/:[^\s/]+/g),d=e.match(s);if(n.length===l.length&&d){r=t[o];let e={},n=[...d.slice(1)];u.forEach(((t,o)=>{e[t.replace(":","")]=n[o]})),a.route={name:r.name,path:d[0],params:e};break}}Object.keys(r).length>0&&(o=null)}}else o="noRoutes";else o=null,r=e;if(o)this.throwError(o);else{if(r.before&&r.before(a),r.module){let e=r.module({parameters:a.route.params??{}}),t=a.router.currentRoute,o=`[data-faster-app] [data-faster-component][data-faster-component-id="${e.name}"][data-faster-component-route="${t}"]`;e.beforeMount&&(a.tools.core.kill=!1,setTimeout((()=>{e.beforeMount(a)}),10)),!0!==a.tools.core.kill&&(document.querySelector(o)||(document.querySelector(".clearfix")?a.tools.dom.before("[data-faster-app] .clearfix",`\n                  <section\n                    data-faster-component\n                    data-faster-component-id="${e.name}"\n                    data-faster-component-route="${t}"\n                    data-faster-component-keep-alive="${!0===e.keepAlive}"\n                  >${e.template}</section>\n                `,!0):a.tools.dom.append("[data-faster-app]",`\n                  <section\n                    data-faster-component\n                    data-faster-component-id="${e.name}"\n                    data-faster-component-route="${t}"\n                    data-faster-component-keep-alive="${!0===e.keepAlive}"\n                  >${e.template}</section>\n                `,!0),e.created&&setTimeout((()=>{e.created(a)}),10)),document.querySelectorAll(`[data-faster-app] [data-faster-component][data-faster-component-id="${e.name}"] *`).forEach((t=>{t.getAttributeNames().forEach((o=>{if(o.startsWith("@")){let r=e.methods[t.getAttribute(o)];o=o.replace("@",""),t.addEventListener(o,r.bind(null,a),!1),t.removeAttribute(`@${o}`)}}))})),a.view(e.name,t)),e.mounted&&setTimeout((()=>{e.mounted(a)}),10)}r.view&&t.view(r.view),r.on&&r.on(a),r.after&&r.after(a)}t.events.routeEntered&&t.events.routeEntered(a)}}},events:{beforeInit:null,init:null,beforeRouteEnter:null,routeEntered:null,loaded:null,ononline:null,onoffline:null},view(e,t=null){let o=FasterJs;[...document.querySelectorAll("[data-faster-app] [data-faster-component]"),...document.querySelectorAll("[data-faster-app] [data-faster-fallback]")].forEach((r=>{let a=[r.getAttribute("data-faster-component-id"),r.getAttribute("data-faster-fallback-type")];if(!t&&a.includes(e)||a.includes(e)&&t&&r.getAttribute("data-faster-component-route")===t)o.config.componentsTransitions?r.style.visibility="visible":r.style.display="block",setTimeout((()=>{r.setAttribute("data-faster-component-activity","active")}),1);else{let e=null!==r.getAttribute("data-faster-component-route")&&"false"===r.getAttribute("data-faster-component-keep-alive");o.config.componentsTransitions?e?(r.ontransitionstart=e=>{FasterJs.tools.dom.el.setAttribute("data-faster-transition","ongoing")},r.ontransitionend=e=>{"active"!==r.getAttribute("data-faster-component-activity")&&r.remove(),FasterJs.tools.dom.el.setAttribute("data-faster-transition","done")}):r.style.visibility="hidden":e?r.remove():r.style.display="none",r.setAttribute("data-faster-component-activity","")}}))},init(){if(this.tools.dom.el=document.querySelectorAll("[data-faster-app]"),document.querySelector("html").style.scrollBehavior="smooth",this.view("스크립팅"),0===this.tools.dom.el.length)return document.body.innerHTML="Error: open console tool to review it.",void console.log("Error: no ([data-faster-app]) element detected in <body>.");if(this.tools.dom.el.length>1)return document.body.innerHTML="Error: open console tool to review it.",void console.log("Error: more than one ([data-faster-app]) element detected in <body>. Only one element should be.");if(this.tools.dom.el=this.tools.dom.el[0],null===this.config.basePathName)return document.querySelector("[data-faster-app]").innerHTML="Error: open console tool to review it.",void console.log("Error: no (Faster.config.basePathName) path value passed.");let e={config:{mode:this.config.mode,el:this.tools.dom.el},router:{baseRoute:this.router.baseRoute,currentRoute:this.router.currentRoute(),goTo:this.router.goTo},tools:this.tools,view:this.view};if(this.tools.core.refresh(),"history"===this.config.mode){if(""!==window.location.hash)return void(window.location.href=window.location.origin+window.location.pathname);window.onpopstate=e=>{this.router.init()}}else window.onhashchange=()=>{this.router.init()},location.origin+location.pathname!==location.origin+this.config.basePathName&&(location.href=location.origin+this.config.basePathName+location.hash);this.events.beforeInit&&this.events.beforeInit(e),window.onload=()=>{this.events.init&&this.events.init(e),this.router.init(),this.events.loaded&&this.events.loaded(e),document.querySelector("[data-faster-loading]")&&setTimeout((()=>{document.querySelector("[data-faster-loading]").classList.add("loaded")}),1)},window.addEventListener("online",(t=>{this.events.ononline?this.events.ononline(e,t):console.log("router event key: ononline")})),window.addEventListener("offline",(t=>{this.events.onoffline?this.events.onoffline(e,t):console.log("router event key: onoffline")}))}};
